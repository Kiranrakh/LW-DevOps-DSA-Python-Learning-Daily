####################################################################
#                JENKINS WINDOWS SLAVE NODE COMPLETE SETUP         #
####################################################################

ğŸ“Œ OBJECTIVE:
-------------
ğŸ”¹ Connect a Windows machine as a Jenkins Agent (Permanent Node).
ğŸ”¹ Enable distributed builds using JNLP with WebSocket.
ğŸ”¹ Automate and isolate Windows-based jobs.

ğŸ“‹ PREREQUISITES:
-----------------
âœ… Jenkins Master (Controller) running
âœ… AWS EC2 Windows instance (used as Jenkins Agent)
âœ… RDP access to Windows Agent
âœ… Java installed on Agent
âœ… Internet access on both systems

ğŸŒ DOWNLOAD LINKS:
------------------
ğŸ”¸ Jenkins: https://www.jenkins.io/download/
ğŸ”¸ Java JDK: https://adoptium.net/en-GB/temurin/releases/

============================================================
ğŸ”‘ STEP 1: LOGIN TO WINDOWS AGENT USING RDP
============================================================

âœ… Go to AWS Console â†’ EC2 â†’ Instances  
âœ… Select your Windows instance â†’ Click "Connect"

â¡ï¸ Select â€œRDP Clientâ€ Tab  
- **Username**: Administrator  
- **Password**: Click â€œGet Passwordâ€  
  - Upload your `.pem` key file  
  - Decrypt to get the password

â¡ï¸ Use the details to login with **Remote Desktop Connection (RDC)** from your local Windows system.

============================================================
ğŸ“‚ STEP 2: PREPARE WINDOWS AGENT ENVIRONMENT
============================================================

1ï¸âƒ£ Inside RDP session on Windows Agent:

- Create a directory for Jenkins work (e.g.):
```

C:\JenkinsWP

```

- This will be the **Remote Root Directory** used in Jenkins node config.

============================================================
ğŸ§± STEP 3: ADD NODE IN JENKINS MASTER
============================================================

ğŸ”¸ Go to Jenkins Dashboard â†’ Manage Jenkins â†’ Manage Nodes and Clouds â†’ New Node

ğŸ”§ Configure:

- Name: `windows-agent`
- Type: **Permanent Agent**
- Click OK

â¡ï¸ Fill in node configuration:

- **# of Executors**: `3`
- **Remote Root Directory**: `C:\JenkinsWP`
- **Labels**: `windows`
- **Usage**: Use this node as much as possible
- **Launch Method**: **Launch agent by connecting it to the controller**
- **Internal Data Directory**: Use WebSocket â†’ âœ… Enable WebSocket

â¡ï¸ Save the node.

============================================================
â˜• STEP 4: INSTALL JAVA ON WINDOWS AGENT
============================================================

1ï¸âƒ£ Download Java JDK for Windows:
ğŸ”— https://adoptium.net/en-GB/temurin/releases/

2ï¸âƒ£ Install it normally.

3ï¸âƒ£ Set Environment Variables:

- `JAVA_HOME` â†’ C:\Program Files\Eclipse Adoptium\jdk-XX
- Add `%JAVA_HOME%\bin` to the system PATH

4ï¸âƒ£ Open Command Prompt â†’ Verify:
```

java -version

```

============================================================
ğŸ“¥ STEP 5: DOWNLOAD AND RUN AGENT.JAR ON WINDOWS
============================================================

âœ… From Jenkins Master UI:

- Go to: `http://<jenkins-master-ip>:8080/computer/windows-agent/`
- Click: `agent.jar` â†’ Download it
- Copy to `C:\JenkinsWP` folder

â¡ï¸ In Windows Agent CMD prompt:
```

cd C:\JenkinsWP
java -jar agent.jar -webSocket

````


\============================================================
âœ… STEP 6: VERIFY CONNECTION
===========================

Go to: Jenkins Dashboard â†’ Nodes â†’ `windows-agent`
Status should be: **Connected (Online)** âœ…

Try building a sample job using label `windows`.

============================================================
ğŸ§ª TEST JOB ON WINDOWS AGENT:
============================================================

1. Create a freestyle Jenkins job
2. Configure â†’ General â†’ Restrict where this project can be run â†’ Label = `windows`
3. Add a simple build step:
   > echo Hello from Windows Agent!
4. Save â†’ Build Now â†’ Confirm it runs on the correct agent

\============================================================
ğŸ› ï¸ TROUBLESHOOTING TIPS
========================

âš ï¸ WebSocket not connecting? Check:

* Jenkins URL accessible from agent
* agent.jar is up to date
* Java is correctly installed
* No firewall blocking port 8080 (Jenkins) or 50000 (JNLP)
* Correct directory permissions

\============================================================
ğŸ¯ CONCLUSION
=============

ğŸ¯ Windows EC2 instance is now connected as Jenkins Agent.
ğŸ¯ WebSocket and Java are configured properly.
ğŸ¯ Can execute Windows-specific or isolated Jenkins jobs efficiently.


