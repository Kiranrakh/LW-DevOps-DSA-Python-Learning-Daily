====================================================
     Ansible Day- 07 - Ansible | AWS | Docker | K8s
====================================================

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ”§ 1. Ansible Essentials
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Check Ansible Version:
    $ ansible --version

â€¢ List All Modules (short description):
    $ ansible-doc -l

â€¢ View Documentation for a Specific Module:
    $ ansible-doc <module_name>

â€¢ Check Installed Files of ansible-core (RHEL/CentOS):
    $ rpm -q -l ansible-core

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“¦ 2. Ansible Galaxy
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Galaxy = Community hub for Ansible roles & collections

â€¢ Install a Collection from Galaxy:
    $ ansible-galaxy collection install <namespace>.<collection>

â€¢ Example:
    $ ansible-galaxy collection install community.aws

â€¢ Collection Format: 
    - Namespace: community
    - Collection: aws
    - Full Module: community.aws.ec2_instance

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ§¾ 3. FQCN / FQMN / CN (Module Naming)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ CN = Collection Name
â€¢ FQMN = Fully Qualified Module Name
â€¢ FQCN = Fully Qualified Collection Name

â€¢ Format:
    <namespace>.<collection>.<module>
    e.g., community.aws.ec2_instance

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ 4. YAML / YML Files (Ansible Playbooks)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ YAML is used to define Ansible Playbooks.
â€¢ Syntax rules:
    - Use consistent indentation
    - Start file with ---
    - Key-value pairs using `:` 

â€¢ Example:
    ---
    - name: Install Apache
      hosts: web
      become: yes
      tasks:
        - name: Install httpd
          yum:
            name: httpd
            state: present

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ” 5. AWS Cloud Integration with Ansible
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Use boto3 (Python SDK) for AWS resource control.

â€¢ Install boto3:
    $ pip install boto3

â€¢ Configure AWS CLI (sets credentials):
    $ aws configure

â€¢ Required Credentials:
    - AWS_ACCESS_KEY_ID
    - AWS_SECRET_ACCESS_KEY
    - Default region (e.g., us-west-2)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ³ 6. Docker with Ansible
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Manage Docker containers with `community.docker` collection.

â€¢ Example Task:
    - name: Run nginx container
      community.docker.docker_container:
        name: nginx
        image: nginx
        state: started
        ports:
          - "80:80"

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â˜¸ï¸ 7. Kubernetes with Ansible
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Use `kubernetes.core` collection.
â€¢ Manage Pods, Deployments, Services, etc.

â€¢ Example:
    - name: Create namespace
      kubernetes.core.k8s:
        api_version: v1
        kind: Namespace
        name: my-namespace
        state: present

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“Œ 8. Useful Python Modules for DevOps
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ boto3 â€“ AWS SDK
â€¢ requests â€“ REST API
â€¢ json â€“ JSON parsing
â€¢ os / sys â€“ System interaction

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“„ 9. Sample Playbook for EC2 Launch (YAML)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```yaml
- name: Launch EC2 Instance on AWS
  hosts: localhost
  gather_facts: no
  tasks:
    - name: Create EC2
      amazon.aws.ec2_instance:
        name: test-server
        key_name: mykey
        instance_type: t2.micro
        image_id: ami-0abcdef1234567890
        region: us-west-1
        wait: yes

===============================================
 DevOps Project Notes - AWS | Ansible | GitHub
===============================================

ğŸ§ª Project Steps:
---------------------
1. Launch OS in AWS (EC2 instance)
2. TN - Public IP
    â†’ TN = Target Node (publicly accessible)
3. IP : Inventory = CN
    â†’ CN = Collection Name or short host alias in inventory
4. Configure Web Server
    â†’ Install Apache/Nginx using Ansible
5. Code: GitHub â†’ Download â†’ Deploy
    â†’ Clone from GitHub & Deploy using Ansible

-----------------------------------------------
ğŸ“ƒ Full Explanation
-----------------------------------------------

Step 1: Launch OS in AWS
-------------------------
- Login to AWS Console.
- Navigate to EC2 > Launch Instance.
- Choose Amazon Linux 2 / Ubuntu.
- Use t2.micro instance (Free Tier).
- Add SSH (22) and HTTP (80) to security group.
- Assign a key pair (for SSH access).
- Note the public IP after launching.

Step 2: TN - Public IP
------------------------
- TN = Target Node (EC2 instance).
- Public IP is used for SSH and Ansible inventory.

Step 3: Inventory = CN
------------------------
Create a file `hosts`:
[web]
13.233.45.67 ansible_user=ec2-user ansible_ssh_private_key_file=~/key.pem

- "web" = CN = Collection name (group name for Ansible).

Step 4: Configure Web Server
-----------------------------
Create `webserver.yml`:
- name: Configure Web Server
  hosts: web
  become: yes
  tasks:
    - name: Install Apache
      yum:
        name: httpd
        state: present

    - name: Start and enable httpd
      service:
        name: httpd
        state: started
        enabled: yes

Run:
ansible-playbook -i hosts webserver.yml

Step 5: GitHub Code Deployment
-------------------------------
Update playbook to include GitHub deployment:
- name: Deploy Code from GitHub
  hosts: web
  become: yes
  tasks:
    - name: Install Git
      yum:
        name: git
        state: present

    - name: Clone website repo
      git:
        repo: 'https://github.com/your-username/your-repo.git'
        dest: /var/www/html

Run again:
ansible-playbook -i hosts webserver.yml

-----------------------------------------------
ğŸ”„ Final Output:
-----------------------------------------------
- EC2 instance running Apache Web Server
- Website code pulled from GitHub and deployed

-----------------------------------------------
ğŸ” Concepts Used
-----------------------------------------------
| Tool/Term       | Description |
|----------------|-------------|
| Ansible         | Automation tool for provisioning and deployment |
| AWS EC2         | Cloud VM used as web server |
| YAML            | File format for Ansible Playbooks |
| Inventory file  | Contains list of target hosts |
| GitHub          | Repository for web code |
| boto3 (optional)| Python SDK for AWS |
| Apache/HTTPD    | Web server software |
| FQCN            | Fully Qualified Collection Name in Ansible |

===============================================
ğŸ“Œ Document Prepared by: Kiran Rakh
===============================================

