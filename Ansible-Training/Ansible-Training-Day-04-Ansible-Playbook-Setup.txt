================================================================================
                Ansible Hands-On Practical: Apache Web Server Setup
================================================================================

ğŸ‘¨â€ğŸ’» Controller Node: Local Machine (Ansible Installed)
ğŸ–¥ï¸  Target Nodes   : AWS EC2 Instances (TG-A, TG-B - Red Hat based)

--------------------------------------------------------------------------------
ğŸ”§ STEP 1: AWS EC2 Target Node Setup
--------------------------------------------------------------------------------
âœ… Launch 2 EC2 instances with:
   - OS          : Red Hat Linux
   - Key Pair    : <your-key.pem>
   - SG Rules    : Allow ports 22 (SSH), 80 (HTTP), 443 (HTTPS)

--------------------------------------------------------------------------------
ğŸ”§ STEP 2: Install Ansible on Controller Node (Your Local Machine)
--------------------------------------------------------------------------------
Run the following:
    $ sudo yum install ansible-core -y

--------------------------------------------------------------------------------
ğŸ”§ STEP 3: Configure SSH Access on Target Nodes
--------------------------------------------------------------------------------
â–¶ Connect to TG-A and TG-B:
    $ ssh -i <key.pem> ec2-user@<public-ip>

â–¶ Become root:
    $ sudo su - root

â–¶ Edit SSH config:
    # nano /etc/ssh/sshd_config
      â†’ PermitRootLogin yes
      â†’ PasswordAuthentication yes

â–¶ Restart SSH service:
    # systemctl restart sshd

â–¶ Set root password:
    # passwd root

--------------------------------------------------------------------------------
ğŸ”§ STEP 4: Configure Ansible Inventory on Controller Node
--------------------------------------------------------------------------------
â–¶ Edit inventory file:
    $ sudo nano /etc/ansible/hosts

â–¶ Add:
    <public-ip-TG-A> ansible_user=root ansible_password=redhat@123
    <public-ip-TG-B> ansible_user=root ansible_password=redhat@123

â–¶ Test Connection:
    $ ansible all -m ping
    $ ansible all -m command -a "id"
    $ ansible all -m command -a "whoami"

--------------------------------------------------------------------------------
ğŸ“ STEP 5: Create Web Page (HTML)
--------------------------------------------------------------------------------
Create file on controller:
    $ cat > /root/kiran.html
    Welcome to DevOps via Ansible

--------------------------------------------------------------------------------
ğŸ“˜ STEP 6: Create Apache Playbook (apache.yml)
--------------------------------------------------------------------------------
Filename: apache.yml

- hosts: all
  tasks:
    - name: Install httpd
      package:
        name: httpd
        state: present

    - name: Install PHP
      package:
        name: php
        state: present

    - name: Copy HTML file
      copy:
        src: /root/kiran.html
        dest: /var/www/html/rk.html

    - name: Start and enable httpd
      service:
        name: httpd
        state: started
        enabled: true

--------------------------------------------------------------------------------
ğŸš€ STEP 7: Run the Playbook
--------------------------------------------------------------------------------
â–¶ Syntax Check:
    $ ansible-playbook --syntax-check apache.yml

â–¶ Run:
    $ ansible-playbook apache.yml

â–¶ Verify:
    - Open browser â†’ http://<target-node-ip>/rk.html

--------------------------------------------------------------------------------
ğŸ“š Ansible Module Reference
--------------------------------------------------------------------------------
â–¶ List modules:
    $ ansible-doc -l

â–¶ Module info:
    $ ansible-doc <module_name>

â–¶ Help:
    $ ansible-playbook -h

--------------------------------------------------------------------------------
ğŸ” Key Concepts Recap
--------------------------------------------------------------------------------
ğŸ”¹ Controller Node   â†’ The system running Ansible (your machine)
ğŸ”¹ Target Node       â†’ Remote systems managed by Ansible (EC2s)
ğŸ”¹ Ad-Hoc Commands   â†’ One-liners for quick tasks (e.g., ansible all -m ping)
ğŸ”¹ Playbook          â†’ YAML automation script
ğŸ”¹ YAML Rules        â†’ Indentation matters, use .yml extension
ğŸ”¹ vi/nano Editors   â†’ For writing/editing playbooks
ğŸ”¹ Packages          â†’ Installed using 'package' module
ğŸ”¹ Services          â†’ Managed using 'service' module

================================================================================
ğŸ’¡ End of Practical â€” Youâ€™ve now automated Apache deployment with Ansible!
================================================================================
